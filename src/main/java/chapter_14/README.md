# 일관성 있는 협력 
## 객체지향 패러다임의 장점 
- 설계를 재사용할 수 있음 
  - 재사용을 위해서는 객체들의 협력 방식을 일관성 있게 만들어야 함 
- 유사한 기능을 구현하기 위해 유사한 협력 패턴을 사용하라 

## chapter11의 코드를 변경 해보자. 

## 일관성 있는 구현 만들기 
- 변하는 개념을 변하지 않는 개념으로부터 분리하라
- 변하는 개념을 캡슐화 하라 
- 객체지향적인 코드는 조건을 판단하지 않는다. 단지 다음 객체로 이동할 뿐이다. 
- 클래스 분리 기준
  - 변경의 이유와 변경 주기 
  - 클래스는 명확히 단 하나의 이유에 의해서만 변경돼야 한다.
  - 클래스 안의 코드는 함께 변경돼야 한다. 
  - 단일 책임 원칙을 따르도록 클래스를 분리해야 한다.

> - 변하는 개념을 변하지 않는 개념으로부터 분리하라
> - 변하는 개념을 캡슐화하라


### 설계에서 무엇이 변화될 수 있는지 고려하라 
- 설계 변경 원인에 대해 고려하기 보다, 재설계 없이 변경할 수 있는 것이 무엇인지를 고려하라
- 캡슐화란, 단순히 데이터를 감추는 것이 아니다. 소프트웨어 안에서 변할 수 있는 어떤 "개념"이라도 감추는 것이다. 


### 변하는 부분을 분리해서 타입 계층을 만든다 
- 변하지 않는 부분으로부터 변하는 부분 분리 
- 변하는 부분들의 공통적인 행동을 추상 클래스 혹은 인터페이스로 추상화 
- 변하는 부분들이 추상 클래스나 인터페이스를 상속받게 만듬 
- 변하는 부분은 변하지 않는 부분의 서브타입이 됨 


### 변하지 않는 부분의 일부로 타입 계층을 합성한다 
- 구현한 타입 계층을 변하지 않는 부분에 합성한다.
- 변하지 않는 부분에서는 변경되는 구체적인 사항에 결합돼서는 안된다.
- 의존성 주입과 같은 기법을 이용하여 오직 추상화에만 의존하게 만든다.

### 변하지 않는 것 
- 규칙

### 변하는 것 
- 적용 조건 


### 유사한 기능에 대해 유사한 협력 패턴을 적용하는 것 
- 개념적 무결성을 유지할 수 있는 가장 효과적인 방법 
  - 일관성과 동일한 뜻으로 간주해도 무방함 
- 개념적 무결성이 시스템 설계에서 가장 중요하다 
- 왠만하면 어색하더라도 전체적으로 일관성을 유지할 수 있는 설계를 해라 


> 지속적으로 개선하라
> - 협력을 설계하는 초기 단계에서 모든 요구사항을 미리 예상할 수 없다.
>   - 때문에, 새로운 요구사항이 추가되면서 일관성의 벽에 조금씩 금이 갈 것이다. 
>   - 새로운 요구사항을 수용할 수 있는 협력 패턴을 향해 설계를 진화시킬 수 있는 좋은 신호로 받아들이자.
> - 협력은 고정된 것이 아니다.
>   - 현재의 협력 패턴이 변경의 무게를 감당하기 어려울 경우, 변경을 수용할 수 있는 협력 패턴을ㄹ 향해 과감하게 리팩터링 해라.
>   - 요구사항의 변경에 따라 협력 역시 지속적으로 개선해야 한다.
>   - 중요한 것은 현재의 설계에 맹목적으로 일관성을 맞추는게 아닌, 달라지는 변경의 방향에 맞춰 지속적으로 코드를 개선하려는 의지다. 